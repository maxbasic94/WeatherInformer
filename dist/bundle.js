(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var i=t.g.document;if(!e&&i&&(i.currentScript&&(e=i.currentScript.src),!e)){var n=i.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"images/0e56d05e08c9cf49890107e6c15082f0.png",i=t.p+"images/dabc17b153f2bd421935d6fa8798138a.png",n=t.p+"images/663cc253f315e911a7394fb231b3b207.png",s=t.p+"images/890ef3748a6f3de6995b177cec5204b2.png",a=t.p+"images/bda8907dac772b8e6efe3c01a042c92a.png",c=function(t,e,i){let n={};return"c"===t?(n.tempUnit="Celsius",n.tempRequest=i.temp_c,n.tempSign="°"):(n.tempUnit="Fahrenheit",n.tempRequest=i.temp_f,n.tempSign="f"),"kph"===e?(n.windUnit="kph",n.windSpeedRequest=i.wind_kph):(n.windUnit="mph",n.windSpeedRequest=i.wind_mph),n},r=async function(t){const e=await fetch(t,{mode:"cors"});if(200==e.status)return await e.json();throw 404==e.status&&(window.location.hash="#notFaund"),new Error(e.status)},o=function(t,e){const i=document.createElement(t);return e&&(i.className=e),i};function d(t,r){const{location:d,current:l,forecast:u}=t,{temperatureUnit:p="c",windSpeedUnit:m="kph"}=localStorage,{tempRequest:v,tempSign:h,tempUnit:g,windUnit:f,windSpeedRequest:S}=c(p,m,l),y=function(t,e,i,n){const s=o("div","currentInfo");return s.innerHTML=`\n        <div class="city">${t.name}</div>\n        <div class="currentTemp">${i}${n}<img src="https:${e.condition.icon}"></div>\n        <div class="currentCondition">${e.condition.text}</div>`,s}(d,l,v,h),w=function(t,s,a){const c=o("div","humPresSpeed");return c.innerHTML=`\n    <div class="humidity"><img сlass='imgHumPresSpeed' src="${e}" alt="Hum" height="30px" width="30px">${t.humidity} %</div>\n    <div class="pressure"><img сlass='imgHumPresSpeed' src="${i}" alt="Pres" height="30px" width="30px">${t.pressure_mb} mBar</div>\n    <div class="windSpeed"><img сlass='imgHumPresSpeed' src="${n}" height="30px" width="30px">${a} ${s}</div>`,c}(l,f,S),$=function(t){const e=o("div","sun");return e.innerHTML=`\n    <div class="sunrise"><img class="sunrise" src="${s}" alt="sunrise" height="30px" width="30px">${t.forecastday[0].astro.sunrise}</div>\n    <div class="sunset">${t.forecastday[0].astro.sunset}<img class="sunset" src="${a}" alt="sunset" height="30px" width="30px"></div>`,e}(u),x=function(t,e,i,n){const s=o("div","today"),a=o("div","dayForecast"),c=e.last_updated.slice(-5).split(":")[0],r=t.forecastday[0].hour.slice(c).concat(t.forecastday[1].hour).splice(1,24);return s.innerHTML='<div class="caption">Today</div>',r.forEach((t=>a.append(function(t,e,i){const n=o("div","timeGroup");let s;return s="Celsius"===e?t.temp_c:t.temp_f,n.innerHTML=function(t,e,i){return`\n  <div class="time">${i.time.substr(-5)}</div>\n  <div class="icon"><img src="https:${i.condition.icon}"></div>\n  <div class="time">${t}${e}</div>`}(s,i,t),n}(t,i,n)))),s.append(a),s}(u,l,g,h),b=function(t,e,i){const n=o("div","nextDays");return t.forecastday.slice(1).forEach((t=>n.append(function(t,e,i){const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(t.date).getDay()],s=o("div","nextDay");let a,c;return"Celsius"===i?(a=t.day.maxtemp_c,c=t.day.mintemp_c):(a=t.day.maxtemp_f,c=t.day.mintemp_f),s.innerHTML=function(t,e,i,n,s){return`\n  <div class="nameNextDay">${t}</div>\n  <div class="iconNextDay"><img src="https:${s.day.condition.icon}"></div>\n  <div class="maxTempNextDay">${e}${n}</div>\n  <div class="minTempNextDay">${i}${n}</div>`}(n,a,c,e,t),s}(t,e,i)))),n}(u,h,g);r.append(y),r.append(w),r.append($),r.append(x),r.append(b),document.querySelector(".dayForecast").addEventListener("mousewheel",(t=>{t=window.event||t;var e=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));document.querySelector(".dayForecast").scrollLeft-=40*e,t.preventDefault()}),!1)}const l=t.p+"images/94d69086bdb47533fb08532ab762a13f.png";const u=function(t){t.preventDefault();const e=document.querySelector(".search").value;e&&async function(t){const e=await fetch(`https://autocomplete.travelpayouts.com/places2?term=${t}&locale=en&types[]=city&callback=json`,{mode:"cors"});if(200==e.status)return await e.text();throw new Error(e.status)}(e).then((t=>function(t){const e=document.querySelector(".favouritePage").lastChild;"searchDiv"!==e.className&&e.remove();let i=JSON.parse(localStorage.getItem("favouriteCitiesArr"));const n=o("div","similarCitiesDiv"),s=o("ul","citiesList");t.slice(0,5).forEach(((t,e)=>{const{name:n,country_name:a}=t;let c=function(t){const e=JSON.parse(localStorage.getItem("favouriteCitiesArr"));return e&&0!==e.length&&e.includes(t)?"gold":"white"}(n);const r=function(t,e,i,n){const s=document.createElement("li");return s.setAttribute("class","similarCityLi"),s.setAttribute("id",t),s.innerHTML=function(t,e,i){return`${t}, ${e} <svg class="addToFavourite" fill=${i} xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 172 172">\n  <path d="M86,3.44c-1.41918,0.00123 -2.69197,0.87377 -3.20485,2.19703l-21.21109,54.68391l-58.31875,2.97641c-1.42104,0.07193 -2.65119,1.01123 -3.09488,2.36314c-0.44369,1.35192 -0.00937,2.83748 1.09269,3.73748l45.41203,37.12781l-14.91562,56.33672c-0.36448,1.37274 0.15208,2.82834 1.30034,3.66425c1.14826,0.83591 2.69217,0.88027 3.88654,0.11168l49.0536,-31.48406l49.0536,31.48406c1.19437,0.76859 2.73828,0.72423 3.88654,-0.11168c1.14826,-0.83591 1.66481,-2.29152 1.30034,-3.66425l-14.91562,-56.33672l45.41203,-37.12781c1.10206,-0.9 1.53638,-2.38556 1.09269,-3.73748c-0.44369,-1.35192 -1.67383,-2.29121 -3.09488,-2.36314l-58.31875,-2.97641l-21.21109,-54.68391c-0.51288,-1.32326 -1.78567,-2.1958 -3.20485,-2.19703zM86,16.38703l18.80578,48.49594c0.49155,1.26528 1.68113,2.12325 3.03687,2.19031l51.6336,2.64047l-40.21844,32.88828c-1.04357,0.85326 -1.49268,2.23736 -1.14891,3.54078l13.21578,49.92703l-43.46359,-27.90297c-1.13361,-0.72914 -2.58858,-0.72914 -3.72219,0l-43.46359,27.90297l13.21578,-49.92703c0.34378,-1.30342 -0.10534,-2.68753 -1.14891,-3.54078l-40.21844,-32.88828l51.6336,-2.64047c1.35575,-0.06706 2.54532,-0.92503 3.03687,-2.19031z"></path>\n  </svg>`}(e,i,n),s}(e,n,a,c);s.append(r),r.addEventListener("click",(t=>{const e=t.currentTarget.textContent.split(",")[0];if("svg"===t.target.tagName||"path"===t.target.tagName){let n=function(t){return"path"===t.target.tagName?t.target.parentNode:t.target}(t);if("white"===n.getAttribute("fill"))n.setAttribute("fill","gold"),i.includes(e)||i.push(e);else{n.setAttribute("fill","white");const t=i.indexOf(e);t>-1&&i.splice(t,1)}}localStorage.setItem("favouriteCitiesArr",JSON.stringify(i))}))})),n.append(s),document.querySelector(".favouritePage").append(n)}(JSON.parse(t.slice(5).slice(0,-2))))).catch(alert)};function p(){const t=o("div","favouriteCities"),i=JSON.parse(localStorage.getItem("favouriteCitiesArr"));return i.length>0&&i.forEach((i=>{t.append(function(t){const i=o("div","favCityDiv");return t.then((t=>{const{location:s,current:a}=t,{temperatureUnit:r="c",windSpeedUnit:o="kph"}=localStorage,{tempRequest:d,tempSign:l,windUnit:u,windSpeedRequest:p}=c(r,o,a);i.innerHTML=function(t,i,s,a,c,r){return`\n  <div class="favCityTempDiv">${s}${a}<img src="https:${i.condition.icon}"  height="50px" width="50px"></div>\n  <div class="favCityLocDiv">${t.name}</div>\n  <div class="favCountryLocDiv">${t.country}</div>\n  <div class="favCityExtraInfoDiv">\n     <div class="humidity"><img сlass='imgHumPresSpeed' src="${e}" alt="Hum" height="30px" width="30px">${i.humidity}%</div>\n     <div class="windSpeed"><img сlass='imgHumPresSpeed' src="${n}" height="30px" width="30px">${r} ${c}</div>\n  </div>\n  `}(s,a,d,l,u,p)})).catch(alert),i}(r(`http://api.weatherapi.com/v1/forecast.json?key=0ca217e793694cf3b27105654211511&q=${i}&days=4&aqi=no&alerts=no`)))})),t}function m(){const t=v();document.querySelector(".app").innerHTML="",document.querySelector(".app").append(t)}function v(){const t=o("div","settingPage");return r("http://api.weatherapi.com/v1/forecast.json?key=0ca217e793694cf3b27105654211511&q=auto:ip&days=4&aqi=no&alerts=no").then((s=>function(t,s){const{current:a,location:r}=t,{temperatureUnit:o="c",windSpeedUnit:d="kph"}=localStorage,{tempUnit:l,tempRequest:u,tempSign:p,windUnit:v,windSpeedRequest:h}=c(o,d,a);s.innerHTML=function(t,s,a,c,r,o,d){return`\n  <div class="locationDiv">\n      <div class="locationCaptionDiv">Your Location Now</div>\n      <div class="locationDescriptionDiv">${o.name}, ${o.country}</div>\n  </div>\n  <div class="locationInfoDiv">\n      <div class="locationIconDiv"><img class="sunrise" src="https:${d.condition.icon}" alt="sunrise" height="150px" width="150px"></div>\n      <div class="locationIconDescriptionDiv">${d.condition.text}</div>\n      <div class="localTempDiv">${s}${a}</div>\n  </div>\n  <div class="locationExtraInfoDiv">\n      <div class="windSpeed"><img сlass='imgHumPresSpeed' src="${n}" height="30px" width="30px">${r} ${c}</div>\n      <div class="humidity"><img сlass='imgHumPresSpeed' src="${e}" alt="Hum" height="30px" width="30px">${d.humidity} %</div>\n      <div class="pressure"><img сlass='imgHumPresSpeed' src="${i}" alt="Pres" height="30px" width="30px">${d.pressure_mb} mBar</div>\n  </div>\n  <div class="locationEditDiv">\n      <div class="tempSettingDiv">\n          <div class="tempSettingCaption">Temperature</div>\n          <div class="tempSettingUnit">${t}</div>\n      </div>\n      <div class="speedWindSettingDiv">\n          <div class="windSpeedSettingCaption">Wind Speed</div>\n          <div class="windSpeedSettingUnit">${c}</div>\n      </div>\n      <div class="sourceSettingDiv">\n          <div class="sourceSettingCaption">Source</div>\n          <div class="sourceSettingUnit">weatherapi.com</div>\n      </div>\n  </div>`}(l,u,p,v,h,r,a),s.addEventListener("click",(({target:t})=>{"tempSettingUnit"===t.className&&("Celsius"===document.querySelector(".tempSettingUnit").textContent?(document.querySelector(".tempSettingUnit").textContent="Fahrenheit",localStorage.setItem("temperatureUnit","f")):(document.querySelector(".tempSettingUnit").textContent="Celsius",localStorage.setItem("temperatureUnit","c")),m()),"windSpeedSettingUnit"===t.className&&("kph"===document.querySelector(".windSpeedSettingUnit").textContent?(document.querySelector(".windSpeedSettingUnit").textContent="mph",localStorage.setItem("windSpeedUnit","mph")):(document.querySelector(".windSpeedSettingUnit").textContent="kph",localStorage.setItem("windSpeedUnit","kph")),m())}))}(s,t))).catch(alert),t}const h=v,g=document.querySelector("#homeButton"),f=document.querySelector("#favouriteButton"),S=document.querySelector("#settingButton"),y="#a37695",w="#37515e",$=document.querySelector(".app"),x=function(t){const e=o("div","informer");return r(t).then((t=>d(t,e))).catch(alert),e}("http://api.weatherapi.com/v1/forecast.json?key=0ca217e793694cf3b27105654211511&q=auto:ip&days=4&aqi=no&alerts=no"),b=function(){null===localStorage.getItem("favouriteCitiesArr")&&localStorage.setItem("favouriteCitiesArr",JSON.stringify([]));const t=o("div","favouritePage"),e=function(){const t=o("div","searchDiv");return t.innerHTML=`\n  <form class="searchForm">\n        <input class="search" type="text" placeholder="Search">\n        <input class="submit" type="submit" value="" style="background: url(${l}) no-repeat">\n  </form>`,t}(),i=p();return t.append(e),t.append(i),t.querySelector(".searchForm").addEventListener("input",(t=>u(t))),t.querySelector(".searchForm").addEventListener("submit",(()=>{const e=p();document.querySelector(".favouritePage").lastChild.remove(),document.querySelector(".favouritePage").append(e),t.querySelector(".search").value=""})),t}(),q=h(),C=function(){const t=o("div","notFaundDiv");return t.textContent="Page not faund",t}(),D=function(t){$.innerHTML="",$.append(t[window.location.hash]),function(t){switch(t){case"#home":g.setAttribute("fill",y),f.setAttribute("fill",w),S.setAttribute("fill",w);break;case"#favourite":g.setAttribute("fill",w),f.setAttribute("fill",y),S.setAttribute("fill",w);break;case"#setting":g.setAttribute("fill",w),f.setAttribute("fill",w),S.setAttribute("fill",y)}}(window.location.hash)},U={"#home":x,"#favourite":b,"#setting":q,"#notFaund":C};window.onload=()=>{window.location.hash="#home",D(U)},window.addEventListener("hashchange",(()=>D(U)))})();